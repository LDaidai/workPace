<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;

        }

        .box img {
            width: 210px;
            height: 320px;
        }

        #top {
            padding: 20px;
        }

        #bottom {
            position: relative;
        }

        .box {
            width: 210px;
            height: 380px;
            margin: 0 15px 15px 0;
            background-color: #e8e8e8;
        }

        .box p:last-child {
            font-size: 13px;
            color: orangered;
        }
    </style>
</head>
<body>
<div id="top">
    <button>3列</button>
    <button>4列</button>
    <button>5列</button>
</div>
<div id="bottom">
    <div class="box">
        <img src="img/timg%201.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%202.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%203.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%204.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%205.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%206.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%207.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%208.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%209.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%2010.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%2011.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%2012.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%2012.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%2012.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>
    <div class="box">
        <img src="img/timg%2012.jpg" alt="">
        <p>因为遇见你</p>
        <p>史上奇遇冒险</p>
    </div>


</div>
<script>
    window.onload = function () {
        //1获取需要的标签
        var btns = document.getElementById("top").children;
        var bottom = document.getElementById("bottom");

        //2,监听按钮的点击
        btns[0].onclick = function () {

            i_flex(3, bottom);

        };
        btns[1].onclick = function () {

            i_flex(4, bottom);

        };
        btns[2].onclick = function () {
            i_flex(5, bottom);

        };

        function i_flex(allCols, parentNode) {
            //2.1定义变量
            var boxW = 210, boxH = 380, marginXY = 15;

            //2.2遍历
            for (var i = 0; i < parentNode.children.length; i++) {
                //2.2.1求出当前盒子所在的列和行
                var row = parseInt(i / allCols);
                var col = parseInt(i % allCols);
                //console.log("当前盒子在第" + row + ",第" + col);

                //2.2.2盒子定位
                var currentBox = parentNode.children[i];
                currentBox.style.position = 'absolute';
                currentBox.style.left = col * (boxW + marginXY) + 'px';
                currentBox.style.top = row * (boxH + marginXY) + 'px';
            }


        }
    }
</script>
</body>
</html>